import{_ as j,a as E,P as I,Q as A,V as q,b as m,r as v,o as l,c as a,e as x,d as e,h as d,t as n,F as S,f as C,g as i,w as c,v as b,p as k,l as B,i as w}from"./index-5401902d.js";const N={components:{ButtonAuth:E},data(){return{rooms:[],id:0,info:null,pays:I,quartiers:A,mQuartiers:A,villes:q,mVilles:q,is_pays:!0,is_quartier:!1,is_ville:!1,lieux:new Array,lieuxVille:[],lieuxQuartier:[],params:{},formSearch:{pays:"",ville:"",quartier:"",lieu:"",arrivee:null,depart:null,adults:1,kids:0},room:null,tableEquipement:new Array,form:{lib:"chambre simple",quantity:4,personPerRoom:0,numberOfBed:0,size:"grande",idHotel:parseInt(this.$route.params.id),price:15e3,attributes:[],images:["http://localhost:5173/src/assets/images/belle-piscine-exterieure-luxe-dans-hotel-complexe.jpg"]},user:{firstName:"",lastName:"",email:"",telephone:0,countrie:"",role:1,password:""},id_opened:!1,is_login:!1,equipements:new Array,equipementList:new Array,$targetEl:document.getElementById("authentication-modal"),options:{placement:"bottom-right",backdrop:"dynamic",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-40",closable:!0,onHide:()=>{console.log("modal is hidden")},onShow:()=>{console.log("modal is shown")},onToggle:()=>{console.log("modal has been toggled")}},modal:new Modal(this.$targetEl,this.options)}},methods:{getEquipementListById:function(r){m.get(`https://rest-api-json-server.vercel.app/equipements/${r}`).then(s=>{this.equipements.push(s.data)})},handleSubmit:function(){console.log(this.formSearch),this.formSearch.arrivee!=""&this.formSearch.depart!=""?document.getElementById("goto").click():alert("Remplir entierement le formulaire")},getTypeRoom:function(){m.get(`https://rest-api-json-server.vercel.app/typeChambres?idHotel=${this.$route.params.id}`).then(r=>{r.data.forEach(s=>{var h=0;m.get(`https://rest-api-json-server.vercel.app/reservations?idHotel=${this.$route.params.id}&idTypeChambre=${s.id}&dateArrive=${this.params.arrivee}&dateDepart=${this.params.depart}`).then(u=>{var t=u.data.length-1;h=u.data.length,s.quantity=s.quantity-h,console.log(s.id),this.rooms.push({typeChambre:s,reservation:u.data[t]})})})})},htmlGenerator:function(r){setTimeout(()=>{const s=document.getElementById("iframe");s.innerHTML=r},1e3)},handleCheck:function(r){this.tableEquipement.push(parseInt(r.target.id))},getToggleValue:function(r){this.form.attributes.indexOf(r.target.value)===-1?this.form.attributes.push(r.target.value):this.form.attributes.splice(this.form.attributes.indexOf(r.target.value),1)},showModal:function(r){this.id_opened=!this.id_opened,this.room=r},closeModal:function(){this.id_opened=!this.id_opened},getEquipementList:function(){m.get("https://rest-api-json-server.vercel.app/equipements").then(r=>{this.equipementList=r.data})},getHotelById:function(){m.get(`https://rest-api-json-server.vercel.app/hotels/${this.$route.params.id}`).then(r=>{this.info=r.data,this.htmlGenerator(r.data.mapsLink),this.info&&new Array(r.data.equipement)[0].forEach(h=>{this.getEquipementListById(h)})})},postReservationHotel:function(r,s){const h=localStorage.getItem("USER");var u=`${r.dateArrive.charAt(0)}${r.dateArrive.charAt(1)}${r.dateArrive.charAt(2)}${r.dateArrive.charAt(3)}-${r.dateArrive.charAt(5)}${r.dateArrive.charAt(6)}-${r.dateArrive.charAt(8)}${r.dateArrive.charAt(9)}`,t=`${r.dateArrive.charAt(8)}${r.dateArrive.charAt(9)}`,p=parseInt(t)-2;p<10?p<1?(t="30",u=`${r.dateArrive.charAt(0)}${r.dateArrive.charAt(1)}${r.dateArrive.charAt(2)}${r.dateArrive.charAt(3)}-${r.dateArrive.charAt(5)}${r.dateArrive.charAt(6)-1}-${t}`):(t=`0${p}`,u=`${r.dateArrive.charAt(0)}${r.dateArrive.charAt(1)}${r.dateArrive.charAt(2)}${r.dateArrive.charAt(3)}-${r.dateArrive.charAt(5)}${r.dateArrive.charAt(6)}-${t}`):u=`${r.dateArrive.charAt(0)}${r.dateArrive.charAt(1)}${r.dateArrive.charAt(2)}${r.dateArrive.charAt(3)}-${r.dateArrive.charAt(5)}${r.dateArrive.charAt(6)}-${p}`;const y=new Date;var g=`${y.getMonth()+1}`;parseInt(g)<10&&(g=`0${g}`);var f=`${y.getDate()}`;parseInt(f)<10&&(f=`0${f}`);var o={...r,dateLimite:u,dateReservation:`${y.getFullYear()}-${g}-${f}`};h?(o={...o,uid:JSON.parse(h).id},console.log(o),m.post("https://rest-api-json-server.vercel.app/reservations",o).then(_=>{console.log(s.quantity),s.quantity>=0&&(s.quantity=s.quantity-1),m.put(`https://rest-api-json-server.vercel.app/typeChambres/${s.id}`,s).then(V=>{this.closeModal()})})):m.post("https://rest-api-json-server.vercel.app/utilisateurs",this.user).then(_=>{o={...o,uid:_.data.id},localStorage.setItem("USER",JSON.stringify({id:_.data.id,role:_.data.role})),m.post("https://rest-api-json-server.vercel.app/reservations",o).then(V=>{console.log(s.quantity),s.quantity>=0&&(s.quantity=s.quantity-1),m.put(`https://rest-api-json-server.vercel.app/typeChambres/${s.id}`,s).then(_t=>{window.location.reload()})})})},openModal:function(){this.modal.isVisible()?this.modal.hide():this.modal.show()}},mounted(){this.getHotelById(),this.getEquipementList(),this.getTypeRoom(),this.id=this.$route.params.id;let r=window.location.href.split("?");if(r.length==2){let h=r[1].split("&"),u={},t="";h.forEach(function(p){t=p.split("="),t.length==2&&(u[t[0]]=t[1])}),this.params=u}localStorage.getItem("USER")&&(this.is_login=!0)}},U={class:"w-full"},D={class:"relative left-0 grid w-full min-h-screen grid-cols-5 mt-20 bg-stone-50"},M=e("div",{class:"col-span-1"},null,-1),H={class:"container w-full h-full col-span-3 dark:bg-gray-800"},L={class:"w-full h-full m-auto bg-white"},T={key:0,class:"w-full overflow-hidden bg-black h-96"},z=["src"],F={class:"justify-between block w-full max-w-5xl m-auto"},O={key:0,class:"p-8"},P={class:"flex justify-start gap-2 px-2 py-2"},Q={class:"my-5 text-4xl"},G={class:"grid grid-cols-2"},J={class:"px-2 my-2"},K=e("h3",{class:"px-2 mt-4 text-lg font-bold"},"Equipements",-1),Y={class:"text-sm"},W={class:"flex flex-wrap gap-2"},X={class:"flex justify-center gap-2 p-2 border rounded-md cursor-pointer text-stone-600 hover:text-blue-500"},Z=e("h3",{class:"px-2 my-2 text-lg"},"Contact",-1),$={class:"px-2 text-lg"},R=e("span",{class:"font-bold"},"Téléphone:",-1),ee=e("a",{href:"#",class:"text-blue-500"},"Site officiel",-1),te=e("br",null,null,-1),re=e("span",{class:"font-bold"},"Email:",-1),se=e("a",{href:"#",class:"text-blue-500"},"Site officiel",-1),oe=e("h3",{class:"px-2 mt-4 text-3xl"},"Description:",-1),le=e("br",null,null,-1),ie={class:"px-2 text-sm"},ae=e("br",null,null,-1),ne=e("section",{id:"iframe"},null,-1),de=e("hr",null,null,-1),ue={class:"container relative p-10 m-auto mt-5 overflow-hidden max-w-7xl"},ce=["action"],pe={"date-rangepicker":"",class:"flex items-center justify-between gap-4 mt-4"},he={class:"bg-gray-50 border border-gray-300 text-gray-900 text-xs rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-5 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},me=e("label",{for:"arrivee"},"Arrivée",-1),be=e("br",null,null,-1),ge={class:"bg-gray-50 border border-gray-300 text-gray-900 text-xs rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-5 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},fe=e("label",{for:"depart"},"Départ",-1),ye=e("br",null,null,-1),_e={class:"grid p-2.5 gap-2 grid-cols-2 mt-4 overflow-hidden text-xs text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},ve={class:"flex items-center justify-center"},xe=e("label",{for:"nbradults"},"Adulte",-1),ke=w('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option>',7),we=[ke],Ae={class:"flex items-center justify-center"},qe=e("label",{for:"nbrkids"},"Enfant",-1),Se=w('<option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>',5),Ce=[Se],Ve=e("button",{type:"submit",class:"w-full flex justify-center h-14 mt-4 items-center py-2.5 px-3 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 mr-2 -ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})]),i(" Search ")],-1),je={id:"slide",class:"relative flex flex-wrap gap-4 p-4 mt-20 transition-all"},Ee={class:"overflow-hidden rounded-md cursor-pointer w-96"},Ie={class:"w-full"},Be=["src","alt"],Ne=e("hr",null,null,-1),Ue={class:"w-full h-full p-4 text-stone-800"},De={class:"mt-4 mb-4 text-lg font-bold"},Me={class:"text-sm"},He={class:"flex justify-between gap-2 my-2 cursor-pointer text-stone-600"},Le=e("span",{class:"text-sm font-bold text-blue-600"},"Size: ",-1),Te={class:"flex justify-between gap-2 my-2 cursor-pointer text-stone-600"},ze=e("span",{class:"text-sm font-bold text-blue-600"},"Nombre de lit: ",-1),Fe={class:"flex justify-between gap-2 my-2 cursor-pointer text-stone-600"},Oe=e("span",{class:"text-sm font-bold text-blue-600"},"Nombre de personne par chambre: ",-1),Pe={class:"text-sm text-red-400"},Qe={class:"flex items-center justify-between row-span-3 gap-4 mt-2"},Ge={key:0,class:""},Je=["onClick"],Ke={class:"row-span-1 text-xl font-bold"},Ye=e("span",{class:"text-xs"},"Pour une nuit",-1),We={key:0},Xe={key:0,class:"fixed top-0 left-0 right-0 z-50 bg-black/50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full"},Ze={class:"relative w-full max-w-xl max-h-full p-5 m-auto bg-white rounded-md shadow-2xl"},$e={class:"my-4 text-lg font-bold"},Re={key:0,class:"text-stone-400"},et={class:"my-2"},tt={class:"text-3xl text-stone-600 first-letter:uppercase"},rt={key:0,class:"my-4 text-lg font-bold"},st={key:1,class:"grid gap-6 mb-6 md:grid-cols-2"},ot=e("label",{for:"first_name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[i("Nom "),e("span",{class:"text-red-500"},"*")],-1),lt=e("label",{for:"last_name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[i("Prénom "),e("span",{class:"text-red-500"},"*")],-1),it=e("label",{for:"phone",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[i("Numèro de téléphone "),e("span",{class:"text-red-500"},"*")],-1),at={class:"grid grid-cols-3 gap-3"},nt={class:"col-span-1"},dt=w('<option selected>Choose a country</option><option value="US">United States</option><option value="CA">Canada</option><option value="FR">France</option><option value="DE">Germany</option>',5),ut=[dt],ct=e("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[i("Email "),e("span",{class:"text-red-500"},"*")],-1),pt={key:2,class:"text-sm text-red-500"},ht={key:3,class:"grid grid-cols-2 my-3"},mt=e("span",{class:"font-bold"},"Date d'arrivée:",-1),bt=e("span",{class:"font-bold"},"Date de depart:",-1),gt={key:4,class:"py-10 text-center"},ft={class:"grid grid-cols-2 gap-3"};function yt(r,s,h,u,t,p){const y=v("ButtonAuth"),g=v("Icon"),f=v("router-link");return l(),a("div",U,[x(y),e("main",D,[M,e("div",H,[e("div",L,[t.info?(l(),a("div",T,[e("img",{src:t.info.profileImage,class:"w-full opacity-50",alt:"",srcset:""},null,8,z)])):d("",!0),e("div",F,[t.info?(l(),a("div",O,[e("div",P,[e("h2",Q,n(t.info.name),1),e("ul",null,[e("li",null,[x(g,{width:"15",icon:"solar:star-linear"})])])]),e("div",G,[e("section",null,[e("h3",J,n(t.info.adresse),1),K,e("div",Y,[e("ul",W,[(l(!0),a(S,null,C(t.equipements,o=>(l(),a("li",X,[x(g,{icon:"uiw:wifi"}),i(" "+n(o.label),1)]))),256))])]),Z,e("p",$,[R,i(" "+n(t.info.tel)+" | ",1),ee,i(),te,re,i(" "+n(t.info.email)+" | ",1),se]),oe,le,e("p",ie,[i(n(t.info.description)+" ",1),ae])]),ne])])):d("",!0)]),de,e("section",ue,[e("form",{action:"/hotel/"+t.id,method:"get"},[e("div",pe,[e("div",he,[me,i(),be,c(e("input",{name:"arrivee",id:"arrivee",type:"date","onUpdate:modelValue":s[0]||(s[0]=o=>t.formSearch.arrivee=o),class:"text-sm border-none bg-gray-50",placeholder:"Select date start",required:""},null,512),[[b,t.formSearch.arrivee]])]),c(e("input",{name:"pays",id:"pays",type:"text","onUpdate:modelValue":s[1]||(s[1]=o=>t.params.pays=o),class:"text-sm border-none bg-gray-50",placeholder:"Select date start",hidden:""},null,512),[[b,t.params.pays]]),c(e("input",{name:"ville",id:"ville",type:"text","onUpdate:modelValue":s[2]||(s[2]=o=>t.params.ville=o),class:"text-sm border-none bg-gray-50",placeholder:"Select date start",hidden:""},null,512),[[b,t.params.ville]]),c(e("input",{name:"quartier",id:"quartier",type:"text","onUpdate:modelValue":s[3]||(s[3]=o=>t.params.quartier=o),class:"text-sm border-none bg-gray-50",placeholder:"Select date start",hidden:""},null,512),[[b,t.params.quartier]]),e("div",ge,[fe,i(),ye,c(e("input",{name:"depart",type:"date",id:"depart","onUpdate:modelValue":s[4]||(s[4]=o=>t.formSearch.depart=o),class:"text-sm border-none bg-gray-50",placeholder:"Select date end",required:""},null,512),[[b,t.formSearch.depart]])])]),e("div",_e,[e("div",ve,[xe,c(e("select",{name:"nbradults","onUpdate:modelValue":s[5]||(s[5]=o=>t.formSearch.adults=o),class:"w-full border-none focus:ring-gray-50 bg-gray-50",id:"nbradults",required:""},we,512),[[k,t.formSearch.adults]])]),e("div",Ae,[qe,c(e("select",{name:"nbrkids","onUpdate:modelValue":s[6]||(s[6]=o=>t.formSearch.kids=o),class:"w-full border-none focus:ring-gray-50 bg-gray-50",id:"nbrkids",required:""},Ce,512),[[k,t.formSearch.kids]])])]),Ve],8,ce),e("ul",je,[(l(!0),a(S,null,C(t.rooms,o=>(l(),a("li",Ee,[(l(),a("div",{class:"relative w-full bg-white border rounded-lg",key:o.typeChambre.id},[e("div",Ie,[e("img",{src:o.typeChambre.images,alt:o.typeChambre.lib,class:"w-full h-52",srcset:""},null,8,Be)]),Ne,e("div",Ue,[e("h2",De,n(o.typeChambre.lib),1),e("ul",Me,[e("ul",null,[e("li",He,[Le,i(n(o.typeChambre.size),1)]),e("li",Te,[ze,i(n(o.typeChambre.numberOfBed),1)]),e("li",Fe,[Oe,i(n(o.typeChambre.personPerRoom),1)])])]),e("span",Pe,n(o.typeChambre.quantity)+" chambres disponibles",1),e("div",Qe,[o.typeChambre.quantity>0?(l(),a("div",Ge,[e("button",{type:"button",onClick:_=>p.showModal(o),class:"basis-1/4 items-center py-2.5 px-3 text-sm font-medium text-white bg-green-700 rounded-lg border border-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800"}," Reserver ",8,Je)])):d("",!0),e("h2",Ke,[i(n(o.typeChambre.price)+" Fcfa ",1),Ye])])])]))]))),256)),t.rooms.length===0?(l(),a("li",We," Aucune chambre n'est disponible pour le moment ")):d("",!0)])])])]),t.id_opened&&t.room?(l(),a("div",Xe,[e("div",Ze,[e("h2",$e,[i(" Reservation pour "),t.params?(l(),a("span",Re,n(t.params.nbradults)+" adultes et "+n(t.params.nbrkids)+" enfant(s). ",1)):d("",!0)]),e("p",et,[e("span",tt,n(t.room.typeChambre.lib),1)]),t.is_login?d("",!0):(l(),a("h2",rt," Qui s’enregistre ? ")),t.is_login?d("",!0):(l(),a("div",st,[e("div",null,[ot,c(e("input",{type:"text","onUpdate:modelValue":s[7]||(s[7]=o=>t.user.firstName=o),id:"first_name",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"John",required:""},null,512),[[b,t.user.firstName]])]),e("div",null,[lt,c(e("input",{type:"text",id:"last_name","onUpdate:modelValue":s[8]||(s[8]=o=>t.user.lastName=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Doe",required:""},null,512),[[b,t.user.lastName]])]),e("div",null,[it,e("div",at,[e("div",nt,[c(e("select",{id:"countries","onUpdate:modelValue":s[9]||(s[9]=o=>t.user.countrie=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},ut,512),[[k,t.user.countrie]])]),c(e("input",{type:"tel",id:"telephone","onUpdate:modelValue":s[10]||(s[10]=o=>t.user.telephone=o),class:"bg-gray-50 col-span-2 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"123-45-678",required:""},null,512),[[b,t.user.telephone]])])]),e("div",null,[ct,c(e("input",{type:"text",id:"email","onUpdate:modelValue":s[11]||(s[11]=o=>t.user.email=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Doe@company.com",required:""},null,512),[[b,t.user.email]])])])),t.room.typeChambre.quantity>0?(l(),a("p",pt," Vous devez confirmer la reservation de la chambre avant votre date d'arrivée ")):d("",!0),t.room.typeChambre.quantity>0?(l(),a("ul",ht,[e("li",null,[mt,i(" "+n(t.params.arrivee),1)]),e("li",null,[bt,i(" "+n(t.params.depart),1)])])):d("",!0),t.room.typeChambre.quantity==0?(l(),a("h4",gt," Chambre indisponible pour cette catégorie ")):d("",!0),e("div",ft,[t.room.typeChambre.quantity>0?(l(),a("button",{key:0,onClick:s[12]||(s[12]=o=>p.postReservationHotel({idHotel:t.info.id,dateArrive:t.params.arrivee,dateDepart:t.params.depart,nbrAdult:t.params.nbradults,nbrKids:t.params.nbrkids,validate:!1,idTypeChambre:t.room.typeChambre.id},t.room.typeChambre)),class:"w-full px-3 py-2 my-4 text-white bg-blue-600 rounded-lg hover:bg-blue-700"}," Reserver la chambre ")):d("",!0),e("button",{onClick:s[13]||(s[13]=(...o)=>p.closeModal&&p.closeModal(...o)),class:"w-full px-3 py-2 my-4 text-white bg-red-600 rounded-lg hover:bg-red-700"}," Annuler ")])])])):d("",!0),t.params?(l(),B(f,{key:1,id:"goto",to:{name:"hotel",params:{id:t.id},query:{pays:t.params.pays,ville:t.params.ville,quartier:t.params.quartier,arrivee:t.formSearch.arrivee,depart:t.formSearch.depart,nbradults:t.formSearch.adults,nbrkids:t.formSearch.kids}}},null,8,["to"])):d("",!0)])])}const xt=j(N,[["render",yt]]);export{xt as default};
