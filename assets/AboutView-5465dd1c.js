import{C as v,p as w,a as C,b as N,B as A,c as D,L as T,d as R}from"./index-50450749.js";import{_ as B,a as S,b as d,r as m,o as i,c,d as e,e as f,w as u,v as h,F as y,f as j,g as b,t as n,h as x}from"./index-5401902d.js";v.register(w,C,N,A,D,T);const V={name:"BarChart",components:{Bar:R,ButtonAuth:S},data(){return{user:{firstName:"",lastName:"",email:"",telephone:0,countrie:"",id:0,role:1,password:""},dateReservation:[],searchText:"",form:{name:"",siteWeb:"",tel:[],adresse:"",description:"",about:"",email:""},is_checked:!0,is_changed:!1,info:[],chartData:{labels:["January","February","March"],datasets:[{label:"Data One",backgroundColor:"#f87979",data:[40,20,12]}]}}},methods:{getDateFormat:function(t){var s=new Date(t);return s.toDateString()},handleChange:function(t){this.is_checked=t.srcElement.checked},handleSearch:function(){d.get("https://rest-api-json-server.vercel.app/hotels").then(t=>{if(this.searchText==="")this.getHotelList();else{this.info=null;let s=new Array(t.data),l=new Array;console.table(s[0]),s[0].forEach(p=>{`${p.name}`.search(this.searchText)!=-1&&l.push(p)}),this.info=l}})},addNumberTel:function(){this.is_changed=!this.is_changed},confirmReservation:function(t){const s={idHotel:t.idHotel,dateArrive:t.dateArrive,dateDepart:t.dateDepart,nbrAdult:t.nbrAdult,nbrKids:t.nbrKids,validate:!0,idTypeChambre:t.idTypeChambre,dateLimite:t.dateLimite,dateReservation:t.dateReservation,uid:t.uid,id:t.id};d.put("https://rest-api-json-server.vercel.app/reservations/"+s.id,s).then(l=>{window.location.reload()})},CancelReservation:function(t){const s={idHotel:t.idHotel,dateArrive:t.dateArrive,dateDepart:t.dateDepart,nbrAdult:t.nbrAdult,nbrKids:t.nbrKids,validate:!1,idTypeChambre:t.idTypeChambre,dateLimite:t.dateLimite,dateReservation:t.dateReservation,uid:t.uid,id:t.id};d.put("https://rest-api-json-server.vercel.app/reservations/"+s.id,s).then(l=>{window.location.reload()})},getHotelList:function(){d.get("https://rest-api-json-server.vercel.app/reservations").then(t=>{this.info.length=0,this.info=t.data})},getUser:function(t){d.get("https://rest-api-json-server.vercel.app/utilisateurs/"+t).then(s=>this.user=s.data)},setUser:function(t){const s={firstName:this.user.firstName,lastName:this.user.lastName,email:this.user.email,telephone:this.user.telephone,countrie:this.user.countrie,role:this.user.role,password:this.user.password};d.put("https://rest-api-json-server.vercel.app/utilisateurs/"+t,s).then(l=>window.location.reload())}},mounted(){const t=localStorage.getItem("USER");new Array,t?(d.get(`https://rest-api-json-server.vercel.app/reservations?uid=${JSON.parse(t).id}`).then(s=>{var l=s.data;this.dateReservation.push(s.data.re),l&&new Array(l)[0].forEach(a=>{d.get(`https://rest-api-json-server.vercel.app/hotels/${a.idHotel}`).then(o=>{d.get(`https://rest-api-json-server.vercel.app/typeChambres/${a.idTypeChambre}`).then(g=>{this.info.push({room:a,hotel:o.data,typeChambre:g.data})})})})}),this.getUser(JSON.parse(t).id)):document.getElementById("tohome").click()}},L={class:"w-full"},U={class:"relative left-0 grid w-full min-h-screen grid-cols-5 p-4 pt-10 mt-20 bg-stone-50"},E=e("div",{class:"col-span-1"},null,-1),F={class:"block col-span-4"},H={class:"block col-span-4 gap-4"},M={class:"bg-white shadow-md sm:rounded-lg"},J={class:"relative max-w-md p-4 m-auto overflow-x-auto"},K=e("h2",{class:"my-4 text-lg font-bold"},"Mes informations",-1),O={class:"flex items-center gap-2 mb-6"},z=["checked"],I=e("label",{for:"modif",class:"text-xs"},"Modifier ces informations",-1),P={class:"grid gap-6 mb-6 md:grid-cols-2"},W=e("label",{for:"firstName",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[b("Nom "),e("span",{class:"text-red-500"},"*")],-1),q=["disabled"],G=e("label",{for:"lastName",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[b("Prénom "),e("span",{class:"text-red-500"},"*")],-1),Q=["disabled"],X={class:"col-span-2"},Y=e("label",{for:"telephone",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[b("Numèro de téléphone "),e("span",{class:"text-red-500"},"*")],-1),Z=["disabled"],$={class:"col-span-2"},ee=e("label",{for:"emailN",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[b("Email "),e("span",{class:"text-red-500"},"*")],-1),te=["disabled"],se=["disabled"],re={class:"my-5"},ae={class:"relative p-4 overflow-x-auto bg-white shadow-md sm:rounded-lg"},oe=e("h2",{class:"my-4 text-lg font-bold"},"Mes reservations",-1),le={class:"pb-4 bg-white dark:bg-gray-900"},de=e("label",{for:"table-search",class:"sr-only"},"Search",-1),ne={class:"relative mt-1"},ie=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-500 dark:text-gray-400","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),ce={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},ue=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"p-4"},[e("div",{class:"flex items-center"},[e("input",{id:"checkbox-all-search",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e("label",{for:"checkbox-all-search",class:"sr-only"},"checkbox")])]),e("th",{scope:"col",class:"px-6 py-3"},"Type de chambre"),e("th",{scope:"col",class:"px-6 py-3"},"Hôtel"),e("th",{scope:"col",class:"px-6 py-3"},"Adresse de l'hotel"),e("th",{scope:"col",class:"px-6 py-3"},"Date de reservation"),e("th",{scope:"col",class:"px-6 py-3"},"Date d'arrivée"),e("th",{scope:"col",class:"px-6 py-3"},"Date de départ"),e("th",{scope:"col",class:"px-6 py-3 text-red-600"}," Date limite pour confirmation "),e("th",{scope:"col",class:"px-6 py-3"},"Actions")])],-1),he={class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},pe=e("td",{class:"w-4 p-4"},[e("div",{class:"flex items-center"},[e("input",{id:"checkbox-table-search-1",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e("label",{for:"checkbox-table-search-1",class:"sr-only"},"checkbox")])],-1),be={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},ge={class:"px-6 py-4"},me={class:"px-6 py-4"},fe={class:"px-6 py-4"},ye={class:"px-6 py-4"},xe={class:"px-6 py-4"},_e={class:"px-6 py-4"},ke={class:"grid gap-2 px-6 py-4"},ve=["onClick"],we=["onClick"];function Ce(t,s,l,p,a,o){const g=m("ButtonAuth"),_=m("router-link");return i(),c(y,null,[e("div",L,[f(g),e("main",U,[E,e("div",F,[e("section",H,[e("div",M,[e("div",J,[K,e("div",O,[e("input",{type:"checkbox",checked:a.is_checked,onChange:s[0]||(s[0]=r=>o.handleChange(r)),name:"modif",id:"modif"},null,40,z),I]),e("div",P,[e("div",null,[W,u(e("input",{type:"text",id:"firstName",name:"firstName","onUpdate:modelValue":s[1]||(s[1]=r=>a.user.firstName=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"John",disabled:a.is_checked},null,8,q),[[h,a.user.firstName]])]),e("div",null,[G,u(e("input",{type:"text",id:"lastName",name:"lastName","onUpdate:modelValue":s[2]||(s[2]=r=>a.user.lastName=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Doe",disabled:a.is_checked},null,8,Q),[[h,a.user.lastName]])]),e("div",X,[Y,u(e("input",{type:"tel",id:"telephone",name:"telephone","onUpdate:modelValue":s[3]||(s[3]=r=>a.user.telephone=r),class:"bg-gray-50 col-span-1 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"123 45 678",disabled:a.is_checked},null,8,Z),[[h,a.user.telephone]])]),e("div",$,[ee,u(e("input",{type:"email",id:"emailN","onUpdate:modelValue":s[4]||(s[4]=r=>a.user.email=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Doe@company.com",disabled:a.is_checked},null,8,te),[[h,a.user.email]])])]),e("button",{onClick:s[5]||(s[5]=r=>o.setUser(a.user.id)),disabled:a.is_checked,class:"items-center px-3 py-2.5 w-full text-sm my-2 font-medium text-white bg-blue-700 border rounded-lg basis-1/4 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-green-300 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800"}," Modifier ",8,se)])]),e("div",re,[e("div",ae,[oe,e("div",le,[de,e("div",ne,[ie,u(e("input",{onChange:s[6]||(s[6]=(...r)=>o.handleSearch&&o.handleSearch(...r)),"onUpdate:modelValue":s[7]||(s[7]=r=>a.searchText=r),type:"text",id:"table-search",class:"block p-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Rechercher un hotel par son nom"},null,544),[[h,a.searchText]])])]),e("table",ce,[ue,e("tbody",null,[(i(!0),c(y,null,j(a.info,r=>(i(),c("tr",he,[pe,e("th",be,n(r.typeChambre.lib),1),e("td",ge,n(r.hotel.name),1),e("td",me,n(r.hotel.adresse),1),e("td",fe,n(o.getDateFormat(r.room.dateReservation)),1),e("td",ye,n(o.getDateFormat(r.room.dateArrive)),1),e("td",xe,n(o.getDateFormat(r.room.dateDepart)),1),e("td",_e,n(o.getDateFormat(r.room.dateLimite)),1),e("td",ke,[r.room.validate?(i(),c("button",{key:0,onClick:k=>o.CancelReservation(r.room),type:"button",class:"grid justify-center px-3 py-2 text-xs font-medium text-white bg-red-400 rounded-md hover:bg-red-500"}," Annuler la reservation ",8,ve)):x("",!0),r.room.validate?x("",!0):(i(),c("button",{key:1,onClick:k=>o.confirmReservation(r.room),type:"button",class:"grid justify-center px-3 py-2 text-xs font-medium text-white bg-green-400 rounded-md hover:bg-green-500"}," Confirmer la réservation ",8,we))])]))),256))])])])])])])])]),f(_,{id:"tohome",to:"home"})],64)}const De=B(V,[["render",Ce]]);export{De as default};
