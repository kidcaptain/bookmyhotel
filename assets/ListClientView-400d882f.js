import{C as y,p as x,a as m,b as v,B as _,c as w,L as k,d as D}from"./index-50450749.js";import{_ as A,a as C,b as d,r as g,o as h,c as u,e as b,d as e,t as i,h as B,F as S,f as N,i as T,g as j}from"./index-5401902d.js";y.register(x,m,v,_,w,k);const E={name:"BarChart",components:{Bar:D,ButtonAuth:C},data(){return{dateReservation:[],searchText:"",is_changed:!1,hotel:null,info:[],chartData:{labels:["Janvier","Fevrier","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre","Novembre","Octobre","Decembre"],datasets:[{label:"Reservation par mois",backgroundColor:"#f87979",data:[40,20,12]}]}}},methods:{getDateFormat:function(t){var s=new Date(t);return s.toDateString()},handleSubmit:function(){confirm("Voulez-vous enregistrer ces informations?")&&d.post("https://rest-api-json-server.vercel.app/hotels",this.form).then(t=>{this.form={name:"",siteWeb:"",tel:[],adresse:"",description:"",about:"",email:""},this.is_changed=!1,this.getHotelList()}).catch(t=>console.log(t))},handleSearch:function(){d.get("https://rest-api-json-server.vercel.app/hotels").then(t=>{if(this.searchText==="")this.getHotelList();else{this.info=null;let s=new Array(t.data),l=new Array;console.table(s[0]),s[0].forEach(o=>{`${o.name}`.search(this.searchText)!=-1&&l.push(o)}),this.info=l}})},getDataTable:function(t){new Array,d.get(`https://rest-api-json-server.vercel.app/hotels/${t}`).then(s=>{this.hotel=s.data,d.get(`https://rest-api-json-server.vercel.app/reservations?idHotel=${t}`).then(l=>{var o=l.data;o&&new Array(o)[0].forEach(a=>{d.get(`https://rest-api-json-server.vercel.app/typeChambres/${a.idTypeChambre}`).then(c=>{d.get(`https://rest-api-json-server.vercel.app/utilisateurs/${a.uid}`).then(p=>{this.info.push({reservation:a,hotel:s.data,typeChambre:c.data,client:p.data})})})})})})},getCountReservationByMonth:function(t){const s=new Date;var l=new Array,o=new Array,n=new Array;for(let c=0;c<12;c++){var a=`${c+1}`;parseInt(a)<10&&(a=`0${a}`),l.push(`${s.getFullYear()}-${a}`)}d.get(`https://rest-api-json-server.vercel.app/reservations?idHotel=${t}`).then(c=>{o=c.data,l.forEach(p=>{var r=0;o.forEach(f=>{f.dateReservation.search(p)!=-1&&r++}),n.push(r)}),this.chartData.datasets[0].data=n})}},mounted(){const t=localStorage.getItem("USER"),s=localStorage.getItem("HOTEL");t&&s&&(this.getCountReservationByMonth(JSON.parse(s)),this.getDataTable(JSON.parse(s)))}},F={class:"w-full"},L={class:"relative left-0 grid w-full min-h-screen grid-cols-5 p-10 mt-20 bg-stone-50"},R=e("div",{class:"col-span-1"},null,-1),V={class:"col-span-4"},$={key:0},H={class:"text-xl font-bold"},J={class:"max-w-2xl p-4 my-2 bg-white shadow-md sm:rounded-lg"},O={class:"relative p-4 overflow-x-auto shadow-md sm:rounded-lg"},I=T('<h2 class="my-4 text-xl">Registre</h2><p class="max-w-3xl my-5 text-sm text-stone-500"> Observer les reservations éffectuées dans votre hôtel. </p><div class="flex my-5 text-white rounded-md shadow-lg bg-sky-600 bg-gradient-to-br from-blue-500 w-52"><button class="px-2 py-2 border-r basis-1/3">Imprimer</button><button class="px-2 py-2 border-r basis-1/3">Excel</button><button class="px-2 py-2 basis-1/3">Pdf</button></div>',3),M={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},P=e("thead",{class:"text-xs text-gray-700 rounded-md bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"p-4 uppercase"},[e("div",{class:"flex items-center gap-2"},[j(" N° "),e("input",{id:"checkbox-all-search",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e("label",{for:"checkbox-all-search",class:"sr-only"},"checkbox")])]),e("th",{scope:"col",class:"px-6 py-3"},[e("span",{class:"uppercase"},"Client"),e("span",{class:"text-gray-400"},"(Nom et Prenom)")]),e("th",{scope:"col",class:"px-6 py-3 uppercase"},"Type de chambre"),e("th",{scope:"col",class:"px-6 py-3 uppercase"}," Date de reservation "),e("th",{scope:"col",class:"px-6 py-3 uppercase"},"Date d'arrivée"),e("th",{scope:"col",class:"px-6 py-3 uppercase"},"Date de départ"),e("th",{scope:"col",class:"px-6 py-3 uppercase"}," Date limite pour confirmation "),e("th",{scope:"col",class:"px-6 py-3 uppercase"},"Actions")])],-1),z=e("td",{class:"w-4 p-4"},[e("div",{class:"flex items-center"},[e("input",{id:"checkbox-table-search-1",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e("label",{for:"checkbox-table-search-1",class:"sr-only"},"checkbox")])],-1),U={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},W={class:"px-6 py-4"},Y={class:"px-6 py-4"},q={class:"px-6 py-4"},G={class:"px-6 py-4"},K={class:"px-6 py-4"},Q=e("td",{class:"grid gap-2 px-6 py-4"},[e("button",{type:"button",class:"grid justify-center px-3 py-2 text-xs font-medium text-white bg-red-400 rounded-md hover:bg-red-500"}," Annuler la reservation "),e("button",{type:"button",class:"grid justify-center px-3 py-2 text-xs font-medium text-white bg-blue-400 rounded-md hover:bg-blue-500"}," Voir les details ")],-1);function X(t,s,l,o,n,a){const c=g("ButtonAuth"),p=g("Bar");return h(),u("div",F,[b(c),e("main",L,[R,e("div",V,[n.hotel?(h(),u("div",$,[e("h1",H,i(n.hotel.name),1),e("div",J,[b(p,{data:n.chartData},null,8,["data"])])])):B("",!0),e("div",O,[I,e("table",M,[P,e("tbody",null,[(h(!0),u(S,null,N(n.info,r=>(h(),u("tr",{class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",key:r.reservation.id},[z,e("th",U,i(r.client.firstName)+" "+i(r.client.lastName),1),e("td",W,i(r.typeChambre.lib),1),e("td",Y,i(a.getDateFormat(r.reservation.dateReservation)),1),e("td",q,i(a.getDateFormat(r.reservation.dateArrive)),1),e("td",G,i(a.getDateFormat(r.reservation.dateDepart)),1),e("td",K,i(a.getDateFormat(r.reservation.dateLimite)),1),Q]))),128))])])])])])])}const te=A(E,[["render",X]]);export{te as default};
